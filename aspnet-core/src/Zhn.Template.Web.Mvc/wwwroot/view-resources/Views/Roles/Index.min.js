function queryParams(n){return{maxResultCount:n.limit,skipCount:n.offset}}(function(){function f(){var n=[];return n.push('<div class="btn-group" role="group" aria-label="Row Operation">'),abp.auth.isGranted("Pages.Administration.Roles.Edit")&&n.push('<button type="button" class="btn btn-sm btn-warning edit" title="edit"><i class="fas fa-edit"><\/i>'+app.localize("Edit")+"<\/button>"),abp.auth.isGranted("Pages.Administration.Roles.Delete")&&n.push('<button type="button" class="btn btn-sm btn-danger remove" title="remove"><i class="fas fa-trash"><\/i>'+app.localize("Delete")+"<\/button>"),n.push("<\/div>"),n.join("")}function e(){var i,r;if(abp.ui.setBusy(n),i=$("#modelForm"),!i.valid())return abp.ui.clearBusy(n),!1;r=i.serializeFormToObject();t.createOrUpdateRole({role:r,Permissions:o()}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));n.modal("hide");refreshTable()}).always(function(){abp.ui.clearBusy(n)})}function o(){var t,r,n;for(i=$.fn.zTree.getZTreeObj("permissionTree"),t=i.getCheckedNodes(!0),r=[],n=0;n<t.length;n++)r.push(t[n].name);return r}function u(t,i){n=bootbox.dialog({title:t,message:'<p><i class="fa fa-spin fa-spinner"><\/i> '+app.localize("Loading")+"<\/p>",size:"large",buttons:{cancel:{label:app.localize("Cancel"),className:"btn-danger"},confirm:{label:app.localize("OK"),className:"btn-success",callback:function(n){if(n)return e(),!1}}}});n.init(function(){$.get(abp.appPath+"Roles/CreateOrEditModal",{userId:i},function(t){n.find(".bootbox-body").html(t);n.find("input:not([type=hidden]):first").focus()})})}var t=abp.services.app.role,i,n,r;window.operateEvents={"click .edit":function(n,t,i){n.preventDefault();u(app.localize("Edit",i.name),i.id)},"click .remove":function(n,i,r){bootbox.confirm({size:"small",title:app.localize("Delete",r.name),message:abp.utils.formatString(abp.localization.localize("AreYouSureWantToDelete","Template"),r.name),callback:function(n){n&&t.delete({id:r.id}).done(function(){var n=$("#tb-body");n.bootstrapTable("remove",{field:"id",values:[r.id]})})}})}};r=[{checkbox:!0},{field:"id",title:"Id",visible:!1},{field:"displayName",title:app.localize("DisplayName")},{field:"creationTime",title:app.localize("CreationTime")},{title:app.localize("Operation"),formatter:f,events:operateEvents}];$(function(){table.init(r);$("#create").click(function(){u(app.localize("CreateNewRole"))})})})();